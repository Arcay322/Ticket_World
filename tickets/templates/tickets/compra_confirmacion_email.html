<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Confirmación de Compra</title>
</head>
<body style="font-family: Arial, sans-serif; margin: 0; padding: 20px; background-color: #f4f6f9;">

    <table width="100%" border="0" cellspacing="0" cellpadding="0">
        <tr>
            <td align="center">
                <table width="600" border="0" cellspacing="0" cellpadding="20" style="background-color: #ffffff; border-radius: 8px; box-shadow: 0 4px 8px rgba(0,0,0,0.1);">
                    
                    <tr>
                        <td align="center" style="border-bottom: 1px solid #eeeeee;">
                            <h1 style="color: #00838f; margin: 0;">¡Gracias por tu compra!</h1>
                        </td>
                    </tr>

                    <tr>
                        <td style="padding: 20px 30px;">
                            <p style="color: #333; font-size: 16px; line-height: 1.6;">
                                Hola, <strong>{{ venta.usuario.username }}</strong>,
                            </p>
                            <p style="color: #333; font-size: 16px; line-height: 1.6;">
                                Tu compra en Ticket World ha sido procesada con éxito. Aquí tienes los detalles de tu orden:
                            </p>

                            <div style="margin: 20px 0; padding: 15px; border: 1px solid #dddddd; border-radius: 5px;">
                                <p><strong>Número de Orden:</strong> #{{ venta.id }}</p>
                                <p><strong>Fecha de Compra:</strong> {{ venta.fecha_compra|date:"d M Y, H:i" }}h</p>
                            </div>

                            <h3 style="color: #333; border-bottom: 2px solid #f0f0f0; padding-bottom: 10px;">Resumen de Boletos</h3>
                            
                            {% for detalle in venta.detalles.all %}
                                <div style="padding: 10px 0; border-bottom: 1px solid #f0f0f0;">
                                    <p style="margin: 5px 0;">
                                        <strong>Evento:</strong> {{ detalle.boleto.evento.nombre }}<br>
                                        <strong>Boleto:</strong> {{ detalle.cantidad }} x {{ detalle.boleto.display_name }}<br>
                                        <strong>Precio:</strong> ${{ detalle.precio_unitario|stringformat:".2f" }} c/u
                                    </p>
                                </div>
                            {% endfor %}

                            <div style="text-align: right; margin-top: 20px;">
                                <h2 style="color: #333; margin: 0;">Total: ${{ venta.total_venta|stringformat:".2f" }}</h2>
                            </div>
                        </td>
                    </tr>

                    <tr>
                        <td align="center" style="padding: 20px; font-size: 12px; color: #888888;">
                            <p>Gracias por confiar en Ticket World.</p>
                        </td>
                    </tr>

                </table>
            </td>
        </tr>
    </table>

</body>
</html>