{% extends "usuarios/base.html" %}
{% load static %}

{% block title %}Mi Perfil - {{ user.username }}{% endblock %}

{% block extra_css %}
    {# Aquí podrías enlazar un CSS específico para el perfil si lo tuvieras #}
    {# <link rel="stylesheet" href="{% static 'usuarios/css/perfil.css' %}"> #}
{% endblock %}

{% block content %}
<section class="perfil-usuario-container">
    <h1>Mi Perfil</h1>

    <div class="perfil-info">
        {% if usuario.foto_perfil %}
            <img src="{{ usuario.foto_perfil.url }}" alt="Foto de perfil" class="foto-perfil">
        {% else %}
            <img src="{% static 'img/avatar.png' %}" alt="Avatar por defecto" class="foto-perfil">
        {% endif %}

        <form method="POST" enctype="multipart/form-data" class="perfil-form">
            {% csrf_token %}
            {{ form.as_p }}
            <button type="submit" class="btn btn-primary">Guardar cambios</button>
        </form>
    </div>

    <div class="acciones">
        {% if usuario.rol == 'cliente' %}
            <a href="{% url 'usuarios:solicitud_proveedor' %}" class="btn btn-secondary">Quiero ser proveedor</a>
        {% elif usuario.rol == 'proveedor' %}
            {# Este enlace dará error hasta que descomentes la URL y la vista 'crear_evento' #}
            {# <a href="{% url 'tickets:crear_evento' %}" class="btn btn-success">Publicar nuevo evento</a> #}
            <p>¡Ya puedes publicar eventos desde el panel de gestión!</p>
        {% endif %}
    </div>
</section>
{% endblock %}